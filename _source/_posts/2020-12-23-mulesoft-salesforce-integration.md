---
layout: blog_post
title: "One Identity Across Salesforce.com and Mulesoft"
author: jefferson-haw
by: internal-contributor
communities: []
description: "In this tutorial, you'll learn how to use Force.com with Mulesoft securely using Okta and OIDC."
tags: [cms, mulesoft, salesforce, oidc]
tweets:
- "Give Salesforce + Mulesoft a try in this tutorial about securing your OIDC apps with Okta."
- "Hey devs - Try Salesforce + Mulesoft + Okta to provide security for your users."
- "Interested in using Okta with Salesforce? Learn how to use Mulesoft + OIDC for secure user identities across apps."
image: blog/featured/okta-dotnet-bottle-headphones.jpg
type: conversion
---

In this tutorial, we'll integrate the custom applications your organization has developed using Salesforce's Force.com platform capability with Okta Identity Cloud through Open ID Connect (aka 'OIDC'). This tutorial will take this one notch further by extending Okta Identity Cloud to also integrate with Mulesoft API Gateway.

Through this approach, you should be able to have any user who is accessing your custom application deployed in Salesforce authenticated by Okta. Once your user has authenticated, Okta will generate an access token via JWT format to the custom application you have developed in Salesforce.com. As a result, your custom application will be able to know who's the user who has authenticated and later on leverage the access token generated by Okta to call an API protected by Mulesoft API Gateway securely.

## What is Force.com?

Force.com is Salesforce's Platform-as-a-Service capability (aka 'PaaS') which allows any organization to develop and build custom applications on top of the Salesforce application which is delivered as Software-as-a-Service (aka 'SaaS').

In this tutorial, you'll be using, Visualforce framework to build your front end—or presentation layer—and the APEX development framework to build your back end, as the business logic layer.

{% img blog/mulesoft-salesforce/image1.png alt:"Salesforce flow" width:"800" %}{: .center-image }
  
## What is an API Gateway?

"An API gateway is a firewall that sits between your API and your users. They range from the simplest proxies which apply throttling and white/blacklisting to fully configurable platforms with fine-grained access mapping individual permissions to specific HTTP verbs and endpoints. Realistically, using an API gateway is not necessary, but it makes some things faster, easier, and more reliable, which allows you to focus on your API." ~ [Keith Casey](https://www.linkedin.com/in/caseysoftware), API Problem Solver

In this tutorial, you'll be using [Salesforce's MuleSoft](https://www.mulesoft.com/) as the API Gateway that will protect an API, and you'll leverage the access token you have obtained earlier to securely and programmatically call this API through the custom application you have developed within Salesforce.

{% img blog/mulesoft-salesforce/image2.png alt:"Okta flow" width:"800" %}{: .center-image }

## Setup your Okta Developer Instance

The expectation is that you have already signed up for an Okta tenant. Head on over to [developer.okta.com](https://developer.okta.com/) and create an Okta org if you haven’t already.

For this example, I’ll be using my own Okta tenant that is `https://phdemo.oktapreview.com`.

Log in with your Okta Super Administrator credentials. Click *Applications* and *Add Application*. Select *Web* and click *Next*.

{% img blog/mulesoft-salesforce/image3.png alt:"Okta add application" width:"800" %}{: .center-image }

This step will create an OpenID Connect application which will represent Salesforce.com as an application. Change the **Name** to "Salesforce Custom Application" and, within the **Grant Type allowed** section, make sure you have **Authorization Code** and **Implicit (Hybrid)** checked. As for the others, leave it as it is as you'll change that later on.

{% img blog/mulesoft-salesforce/image4.png alt:"Okta app settings" width:"800" %}{: .center-image }

Click *Done*.

Note the Client ID and Secret as you will use this on the Salesforce OIDC configuration part.

{% img blog/mulesoft-salesforce/image5.png alt:"Okta client credentials" width:"800" %}{: .center-image }

## Setup a Salesforce.com Developer Instance

You can sign up for a free Saleforce.com developer edition instance through [this link](https://developer.salesforce.com/signup).

Once you have signed up and successfully created your instance, you should be able to navigate to your Salesforce.com admin console. Usually, it should be in a format like: `https://ap5.salesforce.com/lightning/setup/SetupOneHome/home`.

## Configure a Custom Domain for Your Salesforce Instance

You should navigate to *Setup > Settings > Company Settings > My Domain*

Enter the custom domain you wish to use and click check availability. If the domain you've chosen is still available, you should get a green check saying the domain is available and then click *Register Domain*. You should be able to get this message below:

{% img blog/mulesoft-salesforce/image6.png alt:"Salesforce custom domain" width:"800" %}{: .center-image }

Once the custom domain configuration is successfully applied and you navigate back to the main screen, you should see some updates on the displayed page:
  
{% img blog/mulesoft-salesforce/image7.png alt:"Salesforce domain screen" width:"800" %}{: .center-image }

Make sure you click the *Login* button so that you can test your access to the custom domain once the custom domain is available. Click *Deploy to Users* so that we can leverage the custom domain for all your users in Salesforce later on.
  
We will get back to this page later so we can allow users to log into Salesforce using OIDC - which will be covered after this section.

## Integrate Okta as an OIDC Provider within Salesforce

To on-board Okta as an OIDC provider within Salesforce, navigate to *Setup > Settings > Identity > Auth. Providers* within the Salesforce Setup Admin Console.

{% img blog/mulesoft-salesforce/image8.png alt:"Salesforce auth screen" width:"800" %}{: .center-image }

Click *New*. Select *Open ID Connect* as the **Provider Type**.

Fill in the fields with the red marker.

Name can be any name you wish to name this configuration.

The URL suffix will be your Okta subdomain. Using my environment, this will result in `phdemo`.

**Consumer Key** will be the Client ID of the application you've created earlier.

**Consumer Secret** will be the Client Secret of the application you've created earlier.

For the following endpoints, we will be using the default authorization server that is enabled within every Okta instance.

You should be able to get your OAuth server settings from the [.well-known endpoint](https://developer.okta.com/docs/reference/api/oidc/#well-known-oauth-authorization-server). It will be under the format of `https://<yourdomain>.okta.com/oauth2/default/.well-known/oauth-authorization-server` (e.g., `https://phdemo.oktapreview.com/oauth2/default/.well-known/oauth-authorization-server`)

The **Authorize Endpoint URL** should be `https://<your domain>.okta.com/oauth2/default/v1/authorize`. (e.g., `https://phdemo.oktapreview.com/oauth2/default/v1/authorize`)

The **Token Endpoint URL** should be `https://<your domain>.okta.com/oauth2/default/v1/token`. (e.g., `https://phdemo.oktapreview.com/oauth2/default/v1/token`)

The **User Info Endpoint URL**  should be `https://<your domain>.okta.com/oauth2/default/v1/userinfo`. (e.g., `https://phdemo.oktapreview.com/oauth2/default/v1/userinfo`)

The **Token Issuer Endpoint URL** should be `https://<your domain>.okta.com/oauth2/default`. (e.g., `https://phdemo.oktapreview.com/oauth2/default`)

Default scopes should be *profile openid email*

Once completed, it should look like this:

{% img blog/mulesoft-salesforce/image9.png alt:"Salesforce OIDC screen" width:"800" %}{: .center-image }

Great! Now, you need to set a registration handler as part of the process. Luckily, Salesforce allows us to click a link that will automatically create the register handler. *Click it*.

{% img blog/mulesoft-salesforce/image10.png alt:"Salesforce registration handler" width:"800" %}{: .center-image }

Once clicked, you should have something like this:

{% img blog/mulesoft-salesforce/image11.png alt:"Salesforce registration handler clicked" width:"800" %}{: .center-image }

Make sure you set the field **Execute Registration As** with your account:

{% img blog/mulesoft-salesforce/image12.png alt:"Salesforce registration name" width:"800" %}{: .center-image }

Once done with the above, click *Save*, and you should end up with this in total:

{% img blog/mulesoft-salesforce/image13.png alt:"Salesforce auth providers" width:"700" %}{: .center-image }

Notice after saving the OIDC configuration Salesforce has generated URLs below the OIDC config. You need to copy the values for the following fields:

The **Test-Only Initialization URL** - e.g., `https://oktaoidc-dev-ed.my.salesforce.com/services/auth/test/phdemo`

The **OAuth-Only Initialization URL** - e.g., `https://oktaoidc-dev-ed.my.salesforce.com/services/auth/oauth/phdemo`

The **Callback URL** - e.g., `https://login.salesforce.com/services/authcallback/00D2v000002F7VWEA0/phdemo`

## Modify the Okta OIDC Application Redirect URI

Go back to the application instance you have created in Okta and update the **Login redirect URIs** with the values provided above.

{% img blog/mulesoft-salesforce/image14.png alt:"Okta app login URIs" width:"800" %}{: .center-image }

Once done, click *Save* to make sure your changes reflect in the OIDC application within Okta.

## Enable Login with Okta within Salesforce

As mentioned in the previous step (Setup a custom domain for your Salesforce instance), navigate back to *Setup > Settings > Company Settings > My Domain*.

{% img blog/mulesoft-salesforce/image15.png alt:"Salesforce my domain edit" width:"800" %}{: .center-image }

Click the *Edit* button under the **Authentication Configuration**. You should be able to see the OIDC configuration as a checkbox option under the Authentication Service. You need to check this so users can log in to Salesforce using Okta through OIDC.

Click *Save* once you are done. It should look like this:

{% img blog/mulesoft-salesforce/image16.png alt:"Salesforce auth config" width:"800" %}{: .center-image }

You should be able to see additional buttons as a way to login once you navigate to your custom salesforce domain URL. I'm using `oktaoidc-dev-ed.my.salesforce.com`

{% img blog/mulesoft-salesforce/image17.png alt:"Salesforce auth config" width:"600" %}{: .center-image }

## Setup your Salesforce Mulesoft instance

You should be able to sign up for a free 30 day trial of Mulesoft through this [link](https://anypoint.mulesoft.com/login/#/signup?apintent=generic). Once you have signed up, you should be able to login to [Mulesoft Anypoint Platform](https://anypoint.mulesoft.com/login/?apintent=generic).

{% img blog/mulesoft-salesforce/image18.png alt:"Mulesoft sign in" width:"600" %}{: .center-image }

## Deploy a sample API in Mulesoft

Once you are logged into Salesforce Mulesoft, navigate to the **Design Center** from the sidebar navigation.

{% img blog/mulesoft-salesforce/image19.png alt:"Mulesoft design center" width:"800" %}{: .center-image }

Click + *Create new*.

Click + *Create API specification*.

Provide any name you wish to use. Select the Visual Editor radio button. Click *Create specification*.

{% img blog/mulesoft-salesforce/image20.png alt:"Mulesoft new API spec" width:"600" %}{: .center-image }

You should be taken to a new page within the **Design Center**. Click *Import Example*. Check *Contact API Tutorial* and click the *Import Asset* button.

{% img blog/mulesoft-salesforce/image21.png alt:"Mulesoft import asset screen" width:"800" %}{: .center-image }

Click *Import & Replace*.

On the left-hand side, there is one resource already available and this resource is called "/contacts".

{% img blog/mulesoft-salesforce/image22.png alt:"Mulesoft summary contacts" width:"800" %}{: .center-image }

Click *Publish > Publish to Exchange*. Provide a version number and click *Publish to Exchange*.

## Setup Salesforce Mulesoft as OAuth as a Service Application in Okta

Return back to your Okta instance as your Okta Super Administrator. Click *Applications* then *Add Application*. Select *Service* and click *Next*.

{% img blog/mulesoft-salesforce/image23.png alt:"Okta app service screen" width:"800" %}{: .center-image }

Provide a name. Click *Done*.

{% img blog/mulesoft-salesforce/image24.png alt:"Okta name app" width:"800" %}{: .center-image }

Take note of the Client ID and Client secret here as you will use this later on in the step below.

{% img blog/mulesoft-salesforce/image25.png alt:"Okta service app credentials" width:"800" %}{: .center-image }

## Integrate Okta as an OIDC Client Provider in Mulesoft

Return to the home page of the **Anypoint Platform**.

Navigate to *Management Center > Access Management*.

{% img blog/mulesoft-salesforce/image26.png alt:"Mulesoft access management" width:"800" %}{: .center-image }

Navigate to *Access Management > Client Providers*.

{% img blog/mulesoft-salesforce/image27.png alt:"Mulesoft client providers" width:"800" %}{: .center-image }

Click *Add Client Provider > Open ID Connect Dynamic Client Registration*

Provide the following:

**Name:** Any name you wish

**Description:** Any description you wish

Under **Dynamic Client Registration:**

The **Issuer** should be: `https://<your domain>.okta.com/oauth2/default`. (e.g., `https://phdemo.oktapreview.com/oauth2/default`)

The Client Registration URL should be: `https://<your domain>.okta.com/oauth2/v1/clients`. (e.g., `https://phdemo.oktapreview.com/oauth2/v1/clients`)

Leave the **Authorization Header** as blank.

Under **Token Introspection Client:**

**Client ID:** The client ID generated from the last step.

**Client Secret:** The client secret generated from the last step.
  
Under **OpenID Connect Authorization URLs:**

The **Authorize URL** should be: `https://<your domain>.okta.com/oauth2/default/v1/authorize`. (e.g., `https://phdemo.oktapreview.com/oauth2/default/v1/authorize`)

The **Token URL** should be: `https://<your domain>.okta.com/oauth2/default/v1/token`. (e.g., `https://phdemo.oktapreview.com/oauth2/default/v1/token`)

The **Token Introspection URL** should be: `https://<your domain>.okta.com/oauth2/default/v1/introspect`. (e.g., `https://phdemo.oktapreview.com/oauth2/default/v1/introspect`)

{% img blog/mulesoft-salesforce/image28.png alt:"Mulesoft okta client" width:"600" %}{: .center-image }

Click *Save*.
  
Navigate to *Access Management > Environments*

{% img blog/mulesoft-salesforce/image29.png alt:"Mulesoft environments" width:"800" %}{: .center-image }

Click *Sandbox* and make sure you add the client-provider you've just created earlier within the environment.

{% img blog/mulesoft-salesforce/image30.png alt:"Mulesoft client provider add" width:"600" %}{: .center-image }

Click *Update*.

{% img blog/mulesoft-salesforce/image31.png alt:"Mulesoft edit environment" width:"600" %}{: .center-image }

## Setup a Proxy and apply a security policy in Mulesoft
  
Return to the **Anypoint Platform** home page and navigate to *Management Center > API Manager*

Click *Manage API > Manage API from Exchange*

{% img blog/mulesoft-salesforce/image32.png alt:"Mulesoft manage API" width:"600" %}{: .center-image }

Search for the *Mulesoft API* which we created earlier.

{% img blog/mulesoft-salesforce/image33.png alt:"Mulesoft manage API screen" width:"800" %}{: .center-image }

Within the **Managing type**, check the *Endpoint with the Proxy* radio button.

{% img blog/mulesoft-salesforce/image34.png alt:"Mulesoft endpoint proxy" width:"600" %}{: .center-image }

Select *CloudHub* as the default option, and click *Save*.

{% img blog/mulesoft-salesforce/image35.png alt:"Mulesoft API config" width:"600" %}{: .center-image }

You'll be redirected to a new page. Under *Deployment Configuration*, set the **Runtime version** to 3.9.x and provide any name you wish to use for your proxy.

{% img blog/mulesoft-salesforce/image36.png alt:"Mulesoft deployment config" width:"800" %}{: .center-image }

Take note of the **Proxy Application URL** as you will use that later after this step.

Once the deployment is successful, you should see this screen:

{% img blog/mulesoft-salesforce/image37.png alt:"Mulesoft deployment config" width:"600" %}{: .center-image }

On the left-hand side, click *Policies*.

{% img blog/mulesoft-salesforce/image38.png alt:"Mulesoft policies" width:"800" %}{: .center-image }

Click *Apply New Policy*. Search for **Open ID Connect access token enforcement** and *check it*.

{% img blog/mulesoft-salesforce/image39.png alt:"Mulesoft select policy" width:"800" %}{: .center-image }

Click *Configure Policy*.

Enter "openID profile email" as scopes and select *Skip Client ID validation*. Click *Apply*.

{% img blog/mulesoft-salesforce/image40.png alt:"Mulesoft OIDC" width:"800" %}{: .center-image }

You should now see a new record within the API level policies.

You have completed the configuration setup with Salesforce Mulesoft. In the next step, you will integrate Salesforce Mulesoft protected API with Salesforce.

## Get the Auth Provider ID from Salesforce

As per [salesforce documentation](https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_class_Auth_AuthToken.htm), you need to provide an 18-character identifier to get the access token from your 3rd party identity provider,

If you notice in the earlier steps where we created an auth provider in Salesforce, the ID only has 15-characters, meaning it is missing three.

To get the 18 characters' full value, you can go through the steps below.

Navigate to *Setup > Platform Tools > Custom Code > Apex Classes*

Select the *Developer Console*.

{% img blog/mulesoft-salesforce/image41.png alt:"Salesforce classes" width:"600" %}{: .center-image }

{% img blog/mulesoft-salesforce/image42.png alt:"Salesforce dev console" width:"800" %}{: .center-image }

Navigate to *File > Open Resource*

{% img blog/mulesoft-salesforce/image43.png alt:"Salesforce open resource" width:"500" %}{: .center-image }

Search for *AuthProvider.obj* then click *Open*.

{% img blog/mulesoft-salesforce/image44.png alt:"Salesforce authpro" width:"500" %}{: .center-image }

Select *Id* and click *Query* twice.

{% img blog/mulesoft-salesforce/image45.png alt:"Salesforce ID query" width:"800" %}{: .center-image }

You should now see a new text area below. Click *Execute*. You should now see query results.

{% img blog/mulesoft-salesforce/image46.png alt:"Salesforce query results" width:"600" %}{: .center-image }

Take note of the **Auth Provider ID** value, as you will use this later on within the code snippet of the Auto-created Registration Handler.

## Modify Logic for the Auto-Generated Registration Handler in Salesforce

Now, return to Salesforce.

Remember the Autogenerated Registration Handler which was created earlier? You’ll need to modify it so that it can do the following:

1. Show the access token obtained from Okta

2. Call the Okta userinfo API endpoint to show all the user details using the access token

3. Add the access token in the Authorization header of an HTTP request such that Mulesoft API Gateway can verify if the user is allowed to call the API protected by Mulesoft.

 Navigate to *Setup > Platform Tools > Custom Code > Apex Classes*

You should be able to see the auto-created registration handler earlier. Click the Edit link. You should be able to access an in-line code editor. Overwrite the existing code with the following code inside your class:

```java

public String accessToken;

public String callOut{get;set;}

public String sub{get;set;}

public String name{get;set;}

public String email{get;set;}

public String firstName{get;set;}

public String lastName{get;set;}

public String userName{get;set;}

  
public String getAccessToken()

{

HttpRequest req = new HttpRequest();

Http http = new Http();

String url = ' https://<yourOktaDomain>/oauth2/default/v1/userinfo'; //change this to your Okta developer instance userinfo url

req.setEndpoint(url);

req.setMethod('GET');

req.setHeader('Accept', 'application/json');

req.setHeader('Authorization', 'Bearer '+ Auth.AuthToken.getAccessToken('0SO2v000000XjXAGA0', 'Open ID Connect'));//change the first parameter to the Auth. Provider ID obtained earlier.

HTTPResponse resp = http.send(req);

if(resp.getBody() != null)

{

Map<String, String> values = (Map<String, String>)JSON.deserialize(resp.getBody(), Map<String, String>.class);


sub = values.get('sub');

name = values.get('name');

email = values.get('email');

userName = values.get('preferred_username');

firstName = values.get('given_name');

lastname = values.get('family_name');

}

return Auth.AuthToken.getAccessToken('0SO2v000000XjXAGA0', 'Open ID Connect'); //change the first parameter to the Auth. Provider ID obtained earlier.

}

public PageReference fetch_data() {

HttpRequest req = new HttpRequest();

Http http = new Http();

String url = ' http://protectedmulesoftapi.us-e2.cloudhub.io/contacts'; //change this to your Mulesoft API proxy endpoint you've created earlier

req.setEndpoint(url);

req.setMethod('GET');

req.setHeader('Accept', 'application/json');

req.setHeader('Authorization', 'Bearer '+ Auth.AuthToken.getAccessToken('0SO2v000000XjXAGA0', 'Open ID Connect')); //change the first parameter to the Auth. Provider ID obtained earlier.

HTTPResponse resp = http.send(req);

system.debug('INSIDE CALLOUT:'+resp.getBody());

if(resp.getBody() != null)

{

Map<String, String> values = (Map<String, String>)JSON.deserialize(resp.getBody(), Map<String, String>.class);

String append ='';

append = values.get('FirstName') + ':' + values.get('LastName') + ':' + values.get('Email') + ':' + values.get('Company');

callOut = append;

}

return null;

}

global boolean canCreateUser(Auth.UserData data) {

//TODO: Check whether we want to allow the creation of a user with this data

return true;

}

global User createUser(Id portalId, Auth.UserData data){

if(!canCreateUser(data)) {

//Returning null or throwing an exception fails the SSO flow

return null;

}

//The user is authorized, so create their Salesforce user

User u = new User();

Profile p = [SELECT Id FROM profile WHERE name='Standard Platform User'];

//TODO: Customize the username. Also, check that the username doesn't already exist and

//possibly ensure there are enough org licenses to create a user. Must be 80 characters

//or less.

u.username = data.username;

u.email = data.email;

u.lastName = data.lastName;

u.firstName = data.firstName;

String alias = data.username;

//Alias must be 8 characters or less

if(alias.length() > 8) {

alias = alias.substring(0, 8);

}

u.alias = alias;

u.languagelocalekey = 'en_US';

u.localesidkey = 'en_US';

u.emailEncodingKey = 'UTF-8';

u.timeZoneSidKey = 'America/Los_Angeles';

u.profileId = p.Id;

insert u;

return u;

}

global void updateUser(Id userId, Id portalId, Auth.UserData data){

User u = new User(id=userId);

u.email = data.email;

u.lastName = data.lastName;

u.firstName = data.firstName;

}

```

Click *Save*.

Navigate back to the *Apex Class* home page.

Click *Security* on the **AutocreatedRegHandler**.

Make sure you add *Standard Platform User* as an enabled **Profile**. Click *Save*.

{% img blog/mulesoft-salesforce/image47.png alt:"Salesforce security" width:"800" %}{: .center-image }

## Configure Trust over the remote URL called within Salesforce
  
Navigate to *Setup > Settings > Security > Remote Site Settings*
  
Click *New Remote Site*.

Add your Okta URL (e.g.: `https://{yourDomainHere}.okta.com`) and click *Save & New*.

{% img blog/mulesoft-salesforce/image48.png alt:"Salesforce new remote site" width:"800" %}{: .center-image }

Add your *Salesforce Mulesoft Proxy Endpoint URL*. (e.g., `https://domain.cloudhub.io`)

Click *Save*. You have now successfully added your Okta domain and Mulesoft Proxy Endpoint URL as trusted remote URLs.

## Create a Visualforce page to tie everything together

Within Salesforce, navigate to *Platform Tools > Custom Code > Visualforce Pages*

Click *New*. Provide a **Label, Name, and Description**.

{% img blog/mulesoft-salesforce/image49.png alt:"Salesforce new visualforce page" width:"800" %}{: .center-image }

Generally, as per best practice, you would want to create a separate controller or APEX handler for your Visualforce custom page. For this tutorial, you'll re-use the same one you have modified earlier. Overwrite and paste the following code below:

```html

<!-- change the control value with the class name of your controller -->

<apex:page controller="AutocreatedRegHandler1380796002690">

<!-- Begin Default Content REMOVE THIS -->

<h1>Congratulations</h1>

This is your Salesforce page protected by Okta OIDC and OAuth 2.0

<apex:form >

<apex:commandButton id="btn" action="{!fetch_data}" value="Call Protected API behind Mulesoft using OAuth JWT Token below"/>

<p/>

Token: <apex:outputLabel id="one">{!accessToken}</apex:outputLabel>

<p/>

Access Token Details from https://yourdomain.oktapreview.com/oauth2/default/v1/userinfo: <p/>

<apex:outputText >Sub : {!sub}</apex:outputText> <p />

<apex:outputText >Full Name : {!name}</apex:outputText> <p />

<apex:outputText >Email : {!email}</apex:outputText> <p />

<apex:outputText >Username : {!userName}</apex:outputText> <p />

<apex:outputText >First Name: {!firstName}</apex:outputText> <p />

<apex:outputText >Last Name : {!lastName}</apex:outputText> <p />

<apex:outputText >Callout : {!callOut}</apex:outputText>

</apex:form>

<!-- End Default Content REMOVE THIS -->

</apex:page>

```

Click *Save*.

You’re now done with the Salesforce Configuration and setup.

## Testing Out Your Integration

To access or test the Visualforce page you've created, use the URL: `https://salesforce-custom-domain-name-ed--c.visualforce.com/apex/pageName` (e.g., `https://oktaoidc-dev-ed--c.visualforce.com/apex/OktaPage`)

This post enabled you to integrate Okta as the identity provider to your Salesforce custom applications using Force.com (APEX & Visualforce), and also Salesforce Mulesoft API Gateway plus the APIs managed by Mulesoft.

Credits and Shout out to my colleague [Ewan Thomas](https://www.linkedin.com/in/ewan-thomas-872b3294/) for helping me out troubleshooting the Salesforce APEX handler.

If you have more questions, feel free to contact us!

## Learn More About Okta and Development

If you are interested in learning more about security and .NET check out these other great articles:

- [Test in Production with Spring Security and Feature Flags](/blog/2020/10/09/okta-spring-security-feature-flags)
- [Deploy a .NET Container with AWS Fargate](https://developer.okta.com/blog/2020/06/22/deploy-dotnet-container-aws-fargate)
- [The Most Exciting Promise of .NET 5](https://developer.okta.com/blog/2020/04/17/most-exciting-promise-dotnet-5)
- [Create a CI/CD pipeline for .NET with the Azure DevOps Project](https://www.azuredevopslabs.com/labs/vstsextend/azuredevopsprojectdotnet/)

Make sure to follow us on [Twitter](https://twitter.com/oktadev), subscribe to our [YouTube Channel](https://youtube.com/c/oktadev) and check out our [Twitch](https://www.twitch.tv/oktadev) channel so that you never miss any awesome content!
